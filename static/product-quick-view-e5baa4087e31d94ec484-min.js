webpackJsonp([22],{0:function(l,m,c){c(2315);c(2374);c(1392);c(815);c(681);c(379);c(378);c(185);c(225);c(1458);c(210);c(1396);c(699)},185:function(l,m){YUI.add("squarespace-spinner",function(c){c.namespace("Squarespace").Spinner=c.Base.create("Spinner",c.Widget,[],{renderUI:function(){this.get("boundingBox").addClass(this.get("color"));0<c.UA.ie&&10>c.UA.ie&&(this.get("contentBox").append(c.Node.create('<img class="sqs-ie-spinner" src="/universal/images-v6/configuration/crappy-ie-spinner.gif"/>')),
this.get("boundingBox").addClass("degraded"));var g=this.get("size");c.Lang.isNumber(g)||this.get("boundingBox").addClass(g)},spin:function(){this.get("boundingBox").show()},stop:function(){this.get("boundingBox").hide()},addClass:function(c){this.get("boundingBox").addClass(c)}},{CSS_PREFIX:"sqs-spin",NS:"spinner",ATTRS:{size:{value:"default",setter:function(g){c.Lang.isNumber(g)&&(this.set("width",g),this.set("height",g));return g}},color:{value:"light"}}})},"1.0",{requires:["base-build","widget"]})},
210:function(l,m){YUI.add("model",function(c,g){function a(){a.superclass.constructor.apply(this,arguments)}var b=YUI.namespace("Env.Model"),e=c.Lang,d=c.Array,h=c.Object,f="error";c.Model=c.extend(a,c.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(a){this.changed={};this.lastChange={};this.lists=[]},destroy:function(e,b){var c=this;"function"===typeof e&&(b=e,e=null);c.onceAfter("destroy",function(){function a(f){f||d.each(c.lists.concat(),function(a){a.remove(c,e)});
b&&b.apply(null,arguments)}e&&(e.remove||e["delete"])?c.sync("delete",e,a):a()});return a.superclass.destroy.call(c)},generateClientId:function(){b.lastId||(b.lastId=0);return this.constructor.NAME+"_"+(b.lastId+=1)},getAsHTML:function(a){a=this.get(a);return c.Escape.html(e.isValue(a)?String(a):"")},getAsURL:function(a){a=this.get(a);return encodeURIComponent(e.isValue(a)?String(a):"")},isModified:function(){return this.isNew()||!h.isEmpty(this.changed)},isNew:function(){return!e.isValue(this.get("id"))},
load:function(a,e){var b=this;"function"===typeof a&&(e=a,a={});a||(a={});b.sync("read",a,function(c,d){var h={options:a,response:d},g;c?(h.error=c,h.src="load",b.fire(f,h)):(b._loadEvent||(b._loadEvent=b.publish("load",{preventable:!1})),g=h.parsed=b._parse(d),b.setAttrs(g,a),b.changed={},b.fire("load",h));e&&e.apply(null,arguments)});return b},parse:function(a){if("string"===typeof a)try{return c.JSON.parse(a)}catch(b){return this.fire(f,{error:b,response:a,src:"parse"}),null}return a},save:function(a,
b){var e=this;"function"===typeof a&&(b=a,a={});a||(a={});e._validate(e.toJSON(),function(c){c?b&&b.call(null,c):e.sync(e.isNew()?"create":"update",a,function(c,d){var h={options:a,response:d},g;c?(h.error=c,h.src="save",e.fire(f,h)):(e._saveEvent||(e._saveEvent=e.publish("save",{preventable:!1})),d&&(g=h.parsed=e._parse(d),e.setAttrs(g,a)),e.changed={},e.fire("save",h));b&&b.apply(null,arguments)})});return e},set:function(a,e,b){var c={};c[a]=e;return this.setAttrs(c,b)},setAttrs:function(a,e){var b=
this.idAttribute,f,d,g,t;e=c.merge(e);t=e._transaction={};"id"!==b&&(a=c.merge(a),h.owns(a,b)?a.id=a[b]:h.owns(a,"id")&&(a[b]=a.id));for(d in a)h.owns(a,d)&&this._setAttr(d,a[d],e);if(!h.isEmpty(t)){b=this.changed;g=this.lastChange={};for(d in t)h.owns(t,d)&&(f=t[d],b[d]=f.newVal,g[d]={newVal:f.newVal,prevVal:f.prevVal,src:f.src||null});e.silent||(this._changeEvent||(this._changeEvent=this.publish("change",{preventable:!1})),e.changed=g,this.fire("change",e))}return this},sync:function(){var a=d(arguments,
0,!0).pop();"function"===typeof a&&a()},toJSON:function(){var a=this.getAttrs();delete a.clientId;delete a.destroyed;delete a.initialized;"id"!==this.idAttribute&&delete a.id;return a},undo:function(a,e){var b=this.lastChange,c=this.idAttribute,f={},g;a||(a=h.keys(b));d.each(a,function(a){h.owns(b,a)&&(a=a===c?"id":a,g=!0,f[a]=b[a].prevVal)});return g?this.setAttrs(f,e):this},validate:function(a,e){e&&e()},addAttr:function(b,c,f){var d=this.idAttribute,h;d&&b===d&&(d=this._isLazyAttr("id")||this._getAttrCfg("id"),
h=c.value===c.defaultValue?null:c.value,e.isValue(h)||(h=d.value===d.defaultValue?null:d.value,e.isValue(h)||(h=e.isValue(c.defaultValue)?c.defaultValue:d.defaultValue)),c.value=h,d.value!==h&&(d.value=h,this._isLazyAttr("id")?this._state.add("id","lazy",d):this._state.add("id","value",h)));return a.superclass.addAttr.apply(this,arguments)},_parse:function(a){return this.parse(a)},_validate:function(a,b){function c(h){e.isValue(h)?(d.fire(f,{attributes:a,error:h,src:"validate"}),b(h)):b()}var d=this;
1===d.validate.length?c(d.validate(a,c)):d.validate(a,c)},_setAttrVal:function(e,b,c,d,f,h){var g=a.superclass._setAttrVal.apply(this,arguments),l=f&&f._transaction,C=h&&h.initializing;g&&(l&&!C)&&(l[e]={newVal:this.get(e),prevVal:c,src:f.src||null});return g}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"3.17.2",{requires:["base-build","escape","json-parse"]})},225:function(l,m){YUI.add("squarespace-widgets-alert",function(c){c.namespace("Squarespace.Widgets");
var g=c.Squarespace.Widgets.Alert=c.Base.create("alert",c.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:c.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:c.Squarespace.Widgets.Confirmation.ANCHOR,show:function(a){return new g(a)},ATTRS:{className:{value:"alert"},style:{value:c.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:"Okay"}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]})},378:function(l,m){YUI.add("squarespace-rendering",
function(c){c.Squarespace.Rendering={getWidthForHeight:function(c,a,b){return c/a*b},getHeightForWidth:function(c,a,b){return a/c*b},getDimensionsFromNode:function(g){if(g=g.getAttribute("data-image-dimensions")){if(c.Lang.isString(g))return g=g.split("x"),{width:parseInt(g[0],10),height:parseInt(g[1],10)}}else return{width:null,height:null}},getSquarespaceSizeForWidth:function(g){c.config.win.devicePixelRatio&&(g*=c.config.win.devicePixelRatio);return 1500<g?"2500w":1E3<g?"1500w":750<g?"1000w":500<
g?"750w":300<g?"500w":100<g?"300w":"100w"},splitScriptsAndHTML:function(c){for(var a=c.indexOf("<script>"),b=-1,e="",d="",h=0;;){b=c.indexOf("\x3c/script>",h);if(-1==b||-1==a)return{html:c,script:""};var f=c.substring(a+8,b),d=d+f,e=e+c.substring(h,a),h=b+9,a=c.indexOf("<script>",h);if(-1===a)return 0===d.length&&(d=null),e+=c.substring(h),{html:e,script:d}}},getPixelSize:function(c){c=c.split("x");return parseInt(c[0],10)*parseInt(c[1],10)},scaleEmbed:function(c,a){var b=/height="([0-9]+)"/.exec(c);
if(!b)return c;var b=parseInt(b[1],10),e=/width="([0-9]+)"/.exec(c);if(!e)return c;e=parseInt(e[1],10);return c.replace(/height="([0-9]+)"/,'height="'+b*(a/e)+'"').replace(/width="([0-9]+)"/,'width="'+a+'"')},applyStyleToMap:function(c,a){var b=new google.maps.StyledMapType(a,{name:"Custom"});c.mapTypes.set("custom",b);c.setMapTypeId("custom")},createGrayscaleMap:function(c){this.applyStyleToMap(c,[{featureType:"landscape.man_made",elementType:"all",stylers:[{lightness:51}]},{featureType:"poi",elementType:"all",
stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"all",stylers:[{gamma:2.51}]},{featureType:"road.arterial",elementType:"all",stylers:[{gamma:1.9}]},{featureType:"water",elementType:"all",stylers:[{gamma:1.36}]},{featureType:"road.highway",elementType:"all",stylers:[{gamma:1.33}]},{featureType:"transit.station.rail",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"transit.station.bus",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"transit",
elementType:"all",stylers:[{gamma:1.2},{hue:"#0033ff"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{gamma:1.43}]},{featureType:"water",elementType:"all",stylers:[{lightness:-47}]},{featureType:"all",elementType:"all",stylers:[{saturation:-100}]},{featureType:"road.arterial",elementType:"labels",stylers:[{lightness:23}]}])},getIconUrl:function(c,a,b){return"/universal/images-v6/icons/icon-"+c+"-"+a+"-"+b+".png"},onMapConfigure:function(g){if(g=c.one(g)){var a=g.getAncestorData("layout-engine");
g=g.getAncestorData("manager");a&&g&&a.lm.configureBlock(null,g.boundingEl)}},renderMap:function(g,a,b,e){a=c.merge({location:{mapLat:40.720882,mapLng:-74.000988,mapZoom:12},vSize:12},a);if(g){b=b||{};var d=g._node;if(d.__map)google.maps.event.trigger(d.__map,"resize");else{g.addClass("page-map");g.set("innerHTML","&nbsp;");var h=c.bind(function(){d.__geocoder=new google.maps.Geocoder;d.__map=new google.maps.Map(d,{zoom:a.location.mapZoom,center:new google.maps.LatLng(a.location.mapLat,a.location.mapLng),
mapTypeId:google.maps.MapTypeId.ROADMAP,draggable:!0,scrollwheel:!0,disableDefaultUI:!0});c.Lang.isUndefined(e)?c.Squarespace.Rendering.createGrayscaleMap(d.__map):this.applyStyleToMap(d.__map,e);var f=a.location,h;f.addressLine1||f.addressLine2?(h=f.addressLine1+" "+f.addressLine2,f.addressCountry&&(h+=", "+f.addressCountry)):h=a.location.mapLat+","+a.location.mapLng;if(a.location.markerLat&&a.location.markerLng){var g=new google.maps.LatLng(a.location.markerLat,a.location.markerLng);d.__marker=
new google.maps.Marker({map:d.__map,animation:google.maps.Animation.DROP,draggable:!1,position:g,title:f.addressTitle?f.addressTitle+" "+h:h,icon:{url:"/universal/images-v6/icons/icon-map-marker-2x.png",size:new google.maps.Size(52,68),scaledSize:new google.maps.Size(26,34),anchor:new google.maps.Point(13,34)}});c.Lang.isObject(b.infoWindow)&&(d.__infoWindow=new google.maps.InfoWindow(c.merge({pixelOffset:new google.maps.Size(-13,10)},b.infoWindow)),b.infoWindow.autoOpen&&d.__infoWindow.open(d.__map,
d.__marker));google.maps.event.addListener(d.__marker,"click",c.bind(function(a,e){if(d.__infoWindow)d.__infoWindow.open(d.__map,d.__marker);else{a=a.toUrlValue();var b=e.getZoom(),b=c.QueryString.stringify({sll:a,q:h,z:b});window.open("http://maps.google.com/maps?"+b)}},this,g,d.__map))}d.startEditing=function(){d.__map.setOptions({draggable:!0,scrollwheel:!0,disableDefaultUI:!1});d.__marker&&d.__marker.setOptions({draggable:!0})};d.stopEditing=function(){d.__map.setOptions({draggable:!1,scrollwheel:!1,
disableDefaultUI:!0});d.__marker&&d.__marker.setOptions({draggable:!1})};c.one(d).fire("maps-loaded");google.maps.event.addListener(d.__map,"rightclick",c.bind(this.onMapConfigure,this,d))},this);c.Squarespace.GoogleMap.loaded?h():(d.__loadingMap=!0,c.Squarespace.GoogleMap.on("load-success",function(){d.__loadingMap=!1;h()}),c.Squarespace.GoogleMap.load())}}else console.error("Page map node missing...")}}},"1.0",{requires:[]})},379:function(l,m){YUI.add("datatype-date-format",function(c,g){var a=
function(a,c,b){"undefined"===typeof b&&(b=10);for(c+="";parseInt(a,10)<b&&1<b;b/=10)a=c+a;return a.toString()},b={formats:{a:function(a,b){return b.a[a.getDay()]},A:function(a,b){return b.A[a.getDay()]},b:function(a,b){return b.b[a.getMonth()]},B:function(a,b){return b.B[a.getMonth()]},C:function(b){return a(parseInt(b.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(c){return a(parseInt(b.formats.G(c)%100,10),0)},G:function(a){var c=a.getFullYear(),h=parseInt(b.formats.V(a),
10);a=parseInt(b.formats.W(a),10);a>h?c++:0===a&&52<=h&&c--;return c},H:["getHours","0"],I:function(b){b=b.getHours()%12;return a(0===b?12:b,0)},j:function(b){var c=new Date(""+b.getFullYear()+"/1/1 GMT");b=new Date(""+b.getFullYear()+"/"+(b.getMonth()+1)+"/"+b.getDate()+" GMT")-c;b=parseInt(b/6E4/60/24,10)+1;return a(b,0,100)},k:["getHours"," "],l:function(b){b=b.getHours()%12;return a(0===b?12:b," ")},m:function(b){return a(b.getMonth()+1,0)},M:["getMinutes","0"],p:function(a,b){return b.p[12<=
a.getHours()?1:0]},P:function(a,b){return b.P[12<=a.getHours()?1:0]},s:function(a,b){return parseInt(a.getTime()/1E3,10)},S:["getSeconds","0"],u:function(a){a=a.getDay();return 0===a?7:a},U:function(c){var d=parseInt(b.formats.j(c),10);c=6-c.getDay();d=parseInt((d+c)/7,10);return a(d,0)},V:function(c){var d=parseInt(b.formats.W(c),10),h=(new Date(""+c.getFullYear()+"/1/1")).getDay(),d=d+(4<h||1>=h?0:1);53===d&&4>(new Date(""+c.getFullYear()+"/12/31")).getDay()?d=1:0===d&&(d=b.formats.V(new Date(""+
(c.getFullYear()-1)+"/12/31")));return a(d,0)},w:"getDay",W:function(c){var d=parseInt(b.formats.j(c),10);c=7-b.formats.u(c);d=parseInt((d+c)/7,10);return a(d,0,10)},y:function(b){return a(b.getFullYear()%100,0)},Y:"getFullYear",z:function(b){b=b.getTimezoneOffset();var c=a(parseInt(Math.abs(b/60),10),0),h=a(Math.abs(b%60),0);return(0<b?"-":"+")+c+h},Z:function(a){var c=a.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");4<c.length&&(c=b.formats.z(a));
return c},"%":function(a){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(e,d){d=d||{};if(!c.Lang.isDate(e))return c.Lang.isValue(e)?e:"";var h,f;h=d.format||"%Y-%m-%d";f=c.Intl.get("datatype-date-format");for(var g=function(a,c){var e=b.aggregates[c];return"locale"===e?f[c]:e},s=function(d,h){var g=b.formats[h];switch(c.Lang.type(g)){case "string":return e[g]();case "function":return g.call(e,
e,f);case "array":if("string"===c.Lang.type(g[0]))return a(e[g[0]](),g[1]);default:return h}};h.match(/%[cDFhnrRtTxX]/);)h=h.replace(/%([cDFhnrRtTxX])/g,g);h=h.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,s);g=s=void 0;return h}};c.mix(c.namespace("Date"),b);c.namespace("DataType");c.DataType.Date=c.Date},"3.17.2",{lang:"ar ar-JO ca ca-ES da da-DK de de-AT de-DE el el-GR en en-AU en-CA en-GB en-IE en-IN en-JO en-MY en-NZ en-PH en-SG en-US es es-AR es-BO es-CL es-CO es-EC es-ES es-MX es-PE es-PY es-US es-UY es-VE fi fi-FI fr fr-BE fr-CA fr-FR hi hi-IN hu id id-ID it it-IT ja ja-JP ko ko-KR ms ms-MY nb nb-NO nl nl-BE nl-NL pl pl-PL pt pt-BR ro ro-RO ru ru-RU sv sv-SE th th-TH tr tr-TR vi vi-VN zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-Hant-TW".split(" ")})},
681:function(l,m){YUI.add("squarespace-json-template",function(c){function g(a){return a.replace(/([\{\}\(\)\[\]\|\^\$\-\+\?])/g,"\\$1")}function a(a,b){var c=l[a+b];void 0===c&&(c="("+g(a)+"\\S.*?"+g(b)+"\n?)",c=RegExp(c,"g"));return c}function b(a,b){var c=[{context:a,index:-1}];return{PushSection:function(a){if(void 0===a||null===a)return null;a="@"==a?c[c.length-1].context:c[c.length-1].context[a]||null;c.push({context:a,index:-1});return a},Pop:function(){c.pop()},next:function(){var a=c[c.length-
1];-1==a.index&&(a={context:null,index:0},c.push(a));var b=c[c.length-2].context;if(a.index==b.length)c.pop();else return a.context=b[a.index++],!0},_Undefined:function(a){return void 0===b?null:b},_LookUpStack:function(a){for(var b=c.length-1;;){var f=c[b];if("@index"==a){if(-1!=f.index)return f.index}else if(f=f.context,"object"===typeof f&&(f=f[a],void 0!==f))return f;b--;if(-1>=b)return this._Undefined(a)}},get:function(a){if("@"==a)return c[c.length-1].context;var b=a.split("."),f=this._LookUpStack(b[0]);
if(1<b.length)for(var e=1;e<b.length;e++){if(null===f)return"[JSONT: Can't resolve '"+a+"'.]";f=f[b[e]];if(void 0===f)return this._Undefined(b[e])}return f}}}function e(a,b,c){for(var f=0;f<a.length;f++){var e=a[f];if("string"==typeof e)c(e);else(0,e[0])(e[1],b,c)}}function d(a,b,c){var f;f=b.get(a.name);for(var e=0;e<a.formatters.length;e++){var d=a.formatters[e];f=(0,d[0])(f,b,d[1])}c(f)}function h(a,b,c){var f=b.PushSection(a.section_name),d=!1;f&&(d=!0);f&&0===f.length&&(d=!1);d?(e(a.Statements(),
b,c),b.Pop()):(b.Pop(),e(a.Statements("or"),b,c))}function f(a,b,c){for(var f=b.get("@"),d=0;d<a.clauses.length;d++){var h=a.clauses[d],g=h[1];if((0,h[0][0])(f,b,h[0][1])){e(g,b,c);break}}}function H(a,b,c){var f=b.PushSection(a.section_name);if(f&&0<f.length){var f=f.length-1,d=a.Statements();a=a.Statements("alternate");for(var h=0;void 0!==b.next();h++)e(d,b,c),h!=f&&e(a,b,c)}else e(a.Statements("or"),b,c);b.Pop()}function s(b,e){function g(a){if(a.startsWith(D)){var b=e.partials[a.substr(D.length)];
if(b)return[function(a,f,e){return c.JSONTemplate.evaluateJsonTemplate(b,a)},null];throw{name:"BadPartialInclude",message:a.substr(D)+" is not a valid partial. Remember, loops are not supported (a partial include cannot be included inside itself)."};}var f=l.lookup(a);if(!f[0])throw{name:"BadFormatter",message:a+" is not a valid formatter"};return f}function s(a){var b=I.lookup(a);if(!b[0])throw{name:"BadPredicate",message:a+" is not a valid predicate"};return b}var l=new t([B(c.JSONTemplate.DEFAULT_FORMATTERS),
m(c.JSONTemplate.DEFAULT_PREFIX_FORMATTERS)]),I=t([B(c.JSONTemplate.DEFAULT_PREDICATES),m(c.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES)]),r=e.format_char||"|";if(":"!=r&&"|"!=r)throw{name:"ConfigurationError",message:"Only format characters : and | are accepted"};var w=e.meta||"{}",x=w.length;if(1==x%2)throw{name:"ConfigurationError",message:w+" has an odd number of metacharacters"};for(var E=w.substring(0,x/2),w=w.substring(x/2,x),x=a(E,w),p=C({}),u=[p],F=E.length,n,k,A=0;;){n=x.exec(b);if(null===
n)break;else k=n[0];n.index>A&&(A=b.slice(A,n.index),p.Append(A));A=x.lastIndex;n=!1;"\n"==k.slice(-1)&&(k=k.slice(null,-1),n=!0);k=k.slice(F,-F);if("#"!=k.charAt(0)){if("."==k.charAt(0)){k=k.substring(1,k.length);var q={"meta-left":E,"meta-right":w,space:" ",tab:"\t",newline:"\n"}[k];if(void 0!==q){p.Append(q);continue}if(q=k.match(J)){k=q[3];q[1]?(n=H,k=K({section_name:k})):(n=h,k=C({section_name:k}));p.Append([n,k]);u.push(k);p=k;continue}var v;if(q=k.match(L)){n=(v=q[1])?s(v):null;p.NewOrClause(n);
continue}var q=!1,y=k.match(M);if(y){if(v=y[1],q=!0,-1==v.indexOf("?")){n=[function(a){return function(b,c){var f,e,d;if(-1!==a.indexOf(" || ")){f=a.split("||");for(d=0;d<f.length;d++)if(e=f[d].trim(),c.get(e))return!0;return!1}if(-1!==a.indexOf(" && ")){f=a.split(" && ");for(d=0;d<f.length;d++)if(e=f[d].trim(),!c.get(e))return!1;return!0}return c.get(a)}}(v),null];k=G();k.NewOrClause(n);p.Append([f,k]);u.push(k);p=k;continue}}else if("?"==k.charAt(k.length-1)||"?"==k.split(" ")[0].charAt(k.split(" ")[0].length-
1))v=k,q=!0;if(q){n=v?s(v):null;k=G();k.NewOrClause(n);p.Append([f,k]);u.push(k);p=k;continue}if("alternates with"==k){p.AlternatesWith();continue}if("end"==k){u.pop();if(0<u.length)p=u[u.length-1];else throw{name:"TemplateSyntaxError",message:"Got too many {end} statements"};continue}}y=k.split(r);if(1==y.length)q=[g("str")];else{q=[];for(k=1;k<y.length;k++)q.push(g(y[k]));k=y[0]}p.Append([d,{name:k,formatters:q}]);n&&p.Append("\n")}}p.Append(b.slice(A));if(1!==u.length)throw{name:"TemplateSyntaxError",
message:"Got too few {end} statements."};return p}c.namespace("JSONTemplate");var D="apply ",l={};c.JSONTemplate.DEFAULT_FORMATTERS=c.Squarespace.TEMPLATE_FORMATTERS;c.JSONTemplate.DEFAULT_PREFIX_FORMATTERS=[].concat(c.Squarespace.TEMPLATE_PREFIX_FORMATTERS,[{name:"pluralize",func:function(a,b,c){switch(c.length){case 0:b="";c="s";break;case 1:b="";c=c[0];break;case 2:b=c[0];c=c[1];break;default:throw{name:"EvaluationError",message:"pluralize got too many args"};}return 1==a?b:c}},{name:"encode-space",
func:function(a,b,c){return a.replace(/\s/g,"&nbsp;")}},{name:"truncate",func:function(a,b,c){b=c[0]||100;c=c[1]||"...";a&&a.length>b&&(a=a.substring(0,b),a=a.replace(/\w+$/,""),a+=c);return a}},{name:"date",func:function(a,b,f){var e=0,e=(new Date(a)).getTimezoneOffset();if(!c.Lang.isNumber(a))return"Invalid date.";if("undefined"!==typeof TimezoneJS){var d;try{d=new TimezoneJS.Date(a,b.get("website.timeZone"))}catch(h){return"Invalid Timezone"}e=(isNaN(d.getTimezoneOffset())?0:d.getTimezoneOffset())-
e}else b=-parseInt(b.get("website.timeZoneOffset"),10)/6E4,d=(new Date).getTimezoneOffset(),e=b-d;a=new Date(a-6E4*e);f=f.join(" ");return c.DataType.Date.format(a,{format:f})}},{name:"image",func:function(a,b,f){var e;a.mediaFocalPoint&&(e=a.mediaFocalPoint.x+","+a.mediaFocalPoint.y);return'<img class="'+(f[0]?f[0]:"thumb-image")+'" '+(a.title?'alt="'+c.Squarespace.Escaping.escapeForHtmlTag(a.title)+'" ':"")+' data-image="'+a.assetUrl+'" data-image-dimensions="'+a.originalSize+'" data-image-focal-point="'+
e+'"/>'}},{name:"timesince",func:function(a,b,f){if(!c.Lang.isNumber(a))return"Invalid date.";f.join(" ");return'<span class="timesince" data-date="'+a+'">'+c.Squarespace.DateUtils.humanizeDate(a)+"</span>"}},{name:"resizedHeightForWidth",func:function(a,b,c){b=a.split("x");if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);c=parseInt(c[0],10)/a;return parseInt(b*c,10)}},{name:"resizedWidthForHeight",func:function(a,b,c){b=a.split("x");
if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);c=parseInt(c[0],10)/b;return parseInt(a*c,10)}},{name:"squarespaceThumbnailForWidth",func:function(a,b,f){return c.Squarespace.Rendering.getSquarespaceSizeForWidth(parseInt(f[0],10))}},{name:"squarespaceThumbnailForHeight",func:function(a,b,f){b=a.split("x");if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);f=parseInt(f[0],
10)/b;f=parseInt(a*f,10);return c.Squarespace.Rendering.getSquarespaceSizeForWidth(f)}},{name:"cycle",func:function(a,b,c){return c[(a-1)%c.length]}}]);var B=function(a){return{lookup:function(b){return[a[b]||null,null]}}},m=function(a){return{lookup:function(b){for(var c=0;c<a.length;c++){var f=a[c].name,e=a[c].func;if(b.slice(0,f.length)==f)return c=b.charAt(f.length),b=""===c?[]:b.split(c).slice(1),[e,b]}return[null,null]}}},t=function(a){return{lookup:function(b){for(var c=0;c<a.length;c++){var f=
a[c].lookup(b);if(f[0])return f}return[null,null]}}},r=function(a){var b={current_clause:[],Append:function(a){b.current_clause.push(a)},AlternatesWith:function(){throw{name:"TemplateSyntaxError",message:"{.alternates with} can only appear with in {.repeated section ...}"};},NewOrClause:function(a){throw{name:"NotImplemented"};}};return b},C=function(a){var b=r(a);b.statements={"default":b.current_clause};b.section_name=a.section_name;b.Statements=function(a){return b.statements[a||"default"]||[]};
b.NewOrClause=function(a){if(a)throw{name:"TemplateSyntaxError",message:"{.or} clause only takes a predicate inside predicate blocks"};b.current_clause=[];b.statements.or=b.current_clause};return b},K=function(a){var b=C(a);b.AlternatesWith=function(){b.current_clause=[];b.statements.alternate=b.current_clause};return b},G=function(a){var b=r(a);b.clauses=[];b.NewOrClause=function(a){a=a||[function(a){return!0},null];b.current_clause=[];b.clauses.push([a,b.current_clause])};return b},J=/(repeated)?\s*(section)\s+(\S+)?/,
L=/^or(?:[\s\-]+(.+))?/,M=/^if(?:[\s\-]+(.+))?/;c.JSONTemplate.Template=Class.create({initialize:function(a,b,c){a=this.removeMultilineComments(a);this._options=b||{};this._program=s(a,this._options)},removeMultilineComments:function(a){for(var b=a.search("{##"),c;0<=b;)c=a.substr(b),a=a.substr(0,b)+c.substr(c.search("##}")+3),b=a.search("{##");return a},render:function(a,c){var f=b(a,this._options.undefined_str);e(this._program.Statements(),f,c)},expand:function(a){var b=[];this.render(a,function(a){b.push(a)});
return b.join("")}});c.JSONTemplate.DEFAULT_PREDICATES=c.Squarespace.TEMPLATE_PREDICATES;c.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES=c.Squarespace.TEMPLATE_PARAMETRIC_PREDICATES;c.JSONTemplate.evaluateJsonTemplate=function(a,b,f){return"string"!=typeof a?"JSON Template Error: Processing failed because no input was provided. (type: "+typeof a+", template: "+JSON.stringify(a)+", dictionary: "+JSON.stringify(b)+", partials: "+JSON.stringify(f)+")":(new c.JSONTemplate.Template(a,{partials:f})).expand(b)}},
"1.0",{requires:"datatype-date-format json squarespace-common squarespace-date-utils squarespace-rendering squarespace-template-helpers squarespace-util".split(" ")})},699:function(l,m,c){var g=c(75);YUI.add("squarespace-product-utils",function(a){a.Squarespace.ProductUtils={getProductAveragePrice:function(b){b=b.get("structuredContent");if(b.get("productType")===g.DIGITAL)return b.get("priceCents");b=b.get("variants");return a.Array.reduce(b,0,function(a,b){return a+(b.onSale?b.salePrice:b.price)})/
b.length},getProductEffectiveStock:function(b){b=b.get("structuredContent");if(b.get("productType")===g.DIGITAL)return Number.MAX_VALUE;b=b.get("variants");var c=0;a.Array.some(b,function(a){if(a.unlimited)return c=Number.MAX_VALUE,!0;c+=a.qtyInStock});return c},initializeVariantDropdowns:function(){a.all(".product-variants[data-variants]").each(function(b){var c=JSON.parse(b.getAttribute("data-variants")),d=b.all("select"),h=b.siblings(".product-price").item(0),f;h&&(f=h.getHTML());a.Squarespace.ProductUtils._checkVariantStockAndPrice(b,
c,d,h,f);d.detach("change");d.each(function(g){g.after("change",function(g){a.Squarespace.ProductUtils._checkVariantStockAndPrice(b,c,d,h,f)},this)},this)},this)},_checkVariantStockAndPrice:function(b,c,d,h,f){b.removeAttribute("data-unselected-options");b.removeAttribute("data-selected-variant");b.removeAttribute("data-variant-in-stock");var g=b.one(".variant-out-of-stock");g&&g.remove();var s=[],g=null,l=!1,m={};d.each(function(a){var b=a.get("value"),c=a.getAttribute("data-variant-option-name");
0===a.get("selectedIndex")?s.push(c):m[c]=b},this);if(0===s.length){for(d=0;d<c.length;d++){f=c[d];var B=!0,z;for(z in m)if(m[z]!=f.attributes[z]){B=!1;break}if(B){g=f;if(f.unlimited||0<f.qtyInStock)l=!0;break}}!g&&h?h.set("text","Unavailable"):h&&(h.empty(),g.onSale?(h.setHTML(a.Squarespace.Commerce.moneyString(g.salePrice)),h.append(a.Node.create('<span> </span><span class="original-price">'+a.Squarespace.Commerce.moneyString(g.price)+"</span>"))):h.setHTML(a.Squarespace.Commerce.moneyString(g.price)));
g&&!l&&b.append(a.Node.create('<div class="variant-out-of-stock">Out of stock.</div>'))}else h&&h.getHTML()!==f&&h.empty().setHTML(f);b.setAttribute("data-unselected-options",JSON.stringify(s));g&&b.setAttribute("data-selected-variant",JSON.stringify(g));l&&b.setAttribute("data-variant-in-stock",l)}}},"1.0",{requires:["base","node","squarespace-commerce-utils"]})},815:function(l,m){YUI.add("squarespace-async-form",function(c){c.namespace("Squarespace.Widgets");var g=c.Squarespace.Widgets.AsyncForm=
c.Base.create("AsyncForm",c.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._typeGetterMap={date:this._getMultiFieldVal,name:this._getMultiFieldVal,time:this._getMultiFieldVal,address:this._getMultiFieldVal,checkbox:this._getOptionFieldVal,likert:this._getLikertFieldVal,radio:this._getRadioFieldVal,select:this._getSelectVal,phone:this._getPhoneFieldVal};this._typeSetterMap={date:this._setMultiFieldVal,name:this._setMultiFieldVal,time:this._setMultiFieldVal,address:this._setMultiFieldVal,
checkbox:this._setOptionFieldVal,likert:this._setLikertFieldVal,radio:this._setRadioFieldVal,select:this._setSelectVal,phone:this._setPhoneFieldVal};this._defaultGetter=this._getSingleFieldVal;this._defaultSetter=this._setSingleFieldVal},renderUI:function(){g.superclass.renderUI.call(this);var a=this.get("form"),b=a.fields;c.Lang.isString(b[0])&&(b=c.Array.map(b,c.JSON.parse));var b={showTitle:this.get("showTitle"),preventSubmit:this.get("preventDefaultSubmit")||this.get("preventAllSubmits"),hideSubmitButton:this.get("hideSubmitButton"),
formId:a.id,formName:this.get("formName"),formFields:b,formSubmitButtonText:this.get("formSubmitButtonText"),formSubmissionMessage:a.parsedSubmissionMessage,formSubmissionHTML:a.submissionHTML},a=this.get("contentBox"),e=this.get("formTemplate").html,b=c.JSONTemplate.evaluateJsonTemplate(e,b);a.append(b);this._formEl=a.one("form");this._setFormData()},bindUI:function(){this._formEl.on("submit",function(a){if(this.get("preventDefaultSubmit")&&!this.get("preventAllSubmits")){this._clearErrors();var b=
this._validateForm(),e=b.errors;0<e.length?this._renderErrors(e):this.fetchValidatedFormSubmission(this.get("form").id,c.bind(function(){this.fire("submission",{data:b.data})},this),c.bind(function(a){var b=[];c.Object.each(a.errors,function(a,c){b.push({fieldId:c,message:a})});this._renderErrors(b)},this))}a.halt()},this);this.after("formDataChange",this._setFormData,this)},setStateSaving:function(){var a=this.get("contentBox");a.addClass("saving");a.one('input[type="submit"]').set("value","Saving...")},
setStateEditing:function(){var a=this.get("contentBox"),b=this.get("formSubmitButtonText");a.one('input[type="submit"]').set("value",b);a.removeClass("saving")},getLocalValidationErrors:function(){return this._validateForm().errors},fetchValidatedFormSubmission:function(a,b,e){c.Data.post({url:"/api/rest/forms/validate/"+a,headers:{"Content-Type":"application/json"},data:JSON.stringify(this.getFormData()),success:b,failure:e})},getFormData:function(){return this._validateForm().data},_renderErrors:function(a){c.Array.each(a,
function(a){this.get("contentBox").one("#"+a.fieldId).one(".title").insert('<div class="field-error">'+a.message+"</div>","before")},this)},_clearErrors:function(){this.get("contentBox").all(".field-error").remove(!0)},_validateForm:function(){var a={},b=[];this._formEl.all(".form-item").each(function(c){var d=c.getAttribute("id");if(c=this._getFieldData(c)){var h=c.error;h&&b.push({fieldId:d,message:h});a[d]=c.data}},this);return{data:a,errors:b}},_getFieldData:function(a){var b=a.get("className").split(" "),
e=null,d,h=!1;c.Array.each(b,function(a){c.Object.hasKey(this._typeGetterMap,a)?(e=a,d=this._typeGetterMap[e]):"section"===a&&(h=!0)},this);if(!h)return null===e&&(d=this._defaultGetter),d.call(this,a)},_getSingleFieldVal:function(a){var b=a.one(".field-element");if(b){var e=b.get("value"),d,e=!c.Lang.isValue(e)||""===e;a.hasClass("required")&&e&&(d="Required");return{data:b.get("value"),error:d}}return null},_getMultiFieldVal:function(a){var b=[],e,d=!1;a.all(".field-element").each(function(a){var f=
a.get("value");c.Lang.isValue(f)&&""!==f&&(d=!0);b.push(a.get("value"))});a.hasClass("required")&&!d&&(e="Required");return{data:b,error:e}},_getOptionFieldVal:function(a){var b=[],c;a.all("input").each(function(a){a.get("checked")&&b.push(a.get("value"))},this);a.hasClass("required")&&0===b.length&&(c="Required");return{data:b,error:c}},_getLikertFieldVal:function(a){var b={};a.all(".item").each(function(a){var d;a.all("input").each(function(a){a.get("checked")&&(d=a.get("value"))});c.Lang.isValue(d)&&
(b[a.getAttribute("data-question")]=d)});return{data:b,error:void 0}},_getRadioFieldVal:function(a){var b,e;a.all("input").each(function(a){a.get("checked")&&(b=a.get("value"))},this);a.hasClass("required")&&!c.Lang.isValue(b)&&(e="Required");return{data:b,error:e}},_getSelectVal:function(a){var b=a.one("select").get("value"),e,d=!c.Lang.isValue(b)||""===b;a.hasClass("required")&&d&&(e="Required");return{data:b,error:e}},_getPhoneFieldVal:function(a){a=this._getMultiFieldVal(a);var b=a.data;b&&3===
b.length&&b.unshift("");return a},_setFormData:function(){var a=this.get("formData");null!==a&&this._formEl.all(".form-item").each(function(b){var e=a[b.getAttribute("id")];if(e){var d=e.value,e=c.Lang.isValue(d)?d:e.values||[];this._setFieldData(b,e)}},this)},_setFieldData:function(a,b){var e=a.get("className").split(" "),d=null,h,f;c.Array.each(e,function(e){c.Object.hasKey(this._typeSetterMap,e)?(d=e,h=this._typeSetterMap[d]):"section"===e&&(f=!0);if(!f)return null===d&&(h=this._defaultSetter),
h.call(this,a,b)},this)},_setSingleFieldVal:function(a,b){var c=a.one(".field-element");if(c)return c.set("value",b)},_setMultiFieldVal:function(a,b){a.all(".field-element").each(function(a){a.set("value",b[a.getData("title")])})},_setOptionFieldVal:function(a,b){a.all("input").each(function(a){-1!==b.indexOf(a.get("value"))&&a.setAttribute("checked","checked")},this)},_setLikertFieldVal:function(a,b){a.all(".item").each(function(a){var d=a.getAttribute("data-question"),d=b[d];c.Lang.isValue(d)&&
""!==d&&(d=parseInt(d,10)+2,a.all("input").item(d).setAttribute("checked","checked"))})},_setRadioFieldVal:function(a,b){a.all("input").each(function(a){a.get("value")===b&&a.setAttribute("checked","checked")},this)},_setSelectVal:function(a,b){a.one("select").set("value",b)},_setPhoneFieldVal:function(a,b){3===a.all(".field").size()&&4===b.length&&b.shift();this._setMultiFieldVal(a,b)}},{CSS_PREFIX:"sqs-async-form",ATTRS:{form:{value:{fields:[]},validator:c.Lang.isValue},formTemplate:{value:null},
hideSubmitButton:{value:!1},formSubmitButtonText:{value:"Add to Cart"},formName:{value:"My Form Name"},formData:{value:null},showTitle:{value:!0},preventDefaultSubmit:{value:!0},preventAllSubmits:{value:!1}}})},"1.0",{requires:["base","node","json","squarespace-ss-widget","squarespace-json-template"]})},1392:function(l,m,c){var g=c(235);YUI.add("squarespace-cart-utils",function(a){var b,c,d;a.namespace("Squarespace.CartUtils");a.Squarespace.CartUtils={initializeAddToCartButtons:function(){var c=a.Squarespace.Commerce.isExpressCheckout(),
f=!1;a.all(".sqs-add-to-cart-button").each(function(b){var e=b.one(".sqs-add-to-cart-button-inner");e.plug(a.Squarespace.Animations.Scalable,{duration:0.2});c&&"Add To Cart"===b.getData("original-label")&&(e.setContent("Purchase"),b.setData("original-label","Purchase"));b.hasClass("use-form")&&(f=!0)},this);f&&!d&&a.Squarespace.CartUtils._getAdditionalFieldsFormTemplateSchema(function(a){d=a},this);b||(b=a.one("body").delegate("click",a.Squarespace.CartUtils._addCartEntry,".sqs-add-to-cart-button",
this))},_addCartEntry:function(b){var c=b.currentTarget;if(!c.get("parentNode").hasClass("cart-added")){var e=function(b){new a.Squarespace.Widgets.Alert({"strings.title":"Unable to "+(a.Squarespace.Commerce.isExpressCheckout()?"Purchase":"Add")+" Item","strings.message":b})};b=function(a){var b="Please select the ",c=a.length;if(1==c)b+=a[0]+" option.";else if(2==c)b+=a[0]+" and "+a[1]+" options.";else for(var f=0;f<c;f++)b=f==c-1?b+("and "+a[f]+" options."):b+(a[f]+", ");return b};var d=c.getAttribute("data-item-id"),
g,l,m=a.one(c.get("parentNode").siblings(".product-variants").item(0));if(a.Lang.isValue(m)){var z=JSON.parse(m.getAttribute("data-unselected-options")),t=z.length,r=m.getAttribute("data-selected-variant"),m=m.getAttribute("data-variant-in-stock"),r=r?JSON.parse(r):null,m=m?!0:!1;if(0<t){e(b(z));return}if(r)if(m)g=r;else{e("Sorry, we do not have enough of that item available.");return}else{e("Sorry, that item variant is unavailable. Please select another variant.");return}}if(b=c.get("parentNode").siblings(".product-quantity-input").item(0))if(l=
a.one(b).one("input").get("value"),!a.Lang.isNumber(Number(l))){e("Quantity must be a number.");return}c.hasClass("use-form")?this._verifyItemInStock({itemId:d,variant:g,inStockCb:a.bind(function(){a.Squarespace.CartUtils._openAdditionalFieldsForm(c,function(b){a.Squarespace.CartUtils._goToCheckoutOrAddToCart(c,d,g,l,b,e)},this)},this),outOfStockCb:function(){e("Sorry, we do not have enough of that item available.")}}):a.Squarespace.CartUtils._goToCheckoutOrAddToCart(c,d,g,l,null,e)}},_verifyItemInStock:function(b){var c=
a.Squarespace.Singletons.ShoppingCart;a.Data.get({url:a.Squarespace.API_ROOT+"commerce/inventory/stock/",data:{itemId:b.itemId},success:function(e){a.Array.some(e.results,function(a){return a.unlimited?!0:a.qtyInStock>c.totalForItem(b.itemId,b.variant)})?b.inStockCb():b.outOfStockCb()}})},_goToCheckoutOrAddToCart:function(b,c,e,d,g,l){a.Squarespace.CartUtils._setButtonStateAdding(b);if(a.Lang.isValue(d)&&0!==d%1)l("Quantity must be a whole number"),a.Squarespace.CartUtils._setButtonStateIdle(b);else{var m=
a.Squarespace.Commerce.isExpressCheckout();a.Squarespace.Singletons.ShoppingCart.addEntry(c,e,d,g,m,function(c){b.one(".sqs-add-to-cart-button-inner");c?(l(c),a.later(1E3,this,function(){a.Squarespace.CartUtils._setButtonStateIdle(b)})):a.Squarespace.Commerce.isExpressCheckout()?a.Squarespace.Commerce.goToCheckoutPage():a.later(1E3,this,function(){a.Lang.isNull(b._node)||(a.Squarespace.CartUtils._setButtonStateAdded(b),a.later(2E3,this,function(){a.Squarespace.CartUtils._setButtonStateIdle(b)}))})},
this)}},_setButtonStateAdding:function(b){var c=b.one(".sqs-add-to-cart-button-inner");c.once("hidden",function(){c.empty();b.addClass("cart-adding");(new a.Squarespace.Spinner({size:20,color:"light",render:c})).spin();c.append('<div class="status-text">Adding...</div>');c.show()},this);c.hide()},_setButtonStateAdded:function(a){var b=a.one(".sqs-add-to-cart-button-inner");b.empty();a.addClass("cart-added");b.append('<div class="status-text">Added!</div>')},_setButtonStateIdle:function(a){var b=a.one(".sqs-add-to-cart-button-inner");
b.once("hidden",function(){b.empty();a.removeClass("cart-adding");a.removeClass("cart-added");b.setContent(a.getData("original-label"));b.show()},this);b.hide()},_openAdditionalFieldsForm:function(b,f,g){c||(c=new a.Squarespace.Widgets.ModalLightbox({render:a.one("body")}));var l=a.JSON.parse(b.getData("form")),m=new a.Squarespace.Widgets.AsyncForm({form:l,formTemplate:d,formSubmitButtonText:b.getData("original-label"),formName:l.name,showTitle:!0});m.on("submission",function(a){f&&f.call(g||this,
a.data);c.close()},this);c.set("content",m);c.once("close",function(){m.destroy()},this);c.open()},_getAdditionalFieldsFormTemplateSchema:function(b,c){a.Data.get({url:"/api/template/GetTemplateSchema",data:{componentType:"widget",type:g.FORM},success:function(a){b.call(c||this,a)}},this)}}},"1.0",{requires:"base node json squarespace-commerce-utils squarespace-modal-lightbox squarespace-async-form squarespace-animations squarespace-spinner squarespace-widgets-alert".split(" ")})},1396:function(l,
m,c){var g=c(75),a=c(128);YUI.add("squarespace-commerce-analytics",function(b){var c=new b.Base.create("commerceTrack",b.Base,[],{itemViewed:function(a){this.fire("commerce-item-viewed",a)},itemAdded:function(a){this.fire("commerce-item-added",a)},itemRemoved:function(a){this.fire("commerce-item-removed",a)},itemModified:function(a){this.fire("commerce-item-modified",a)},checkoutStarted:function(a){this.fire("commerce-checkout-started",a)},checkoutConfirmed:function(a){this.fire("commerce-checkout-confirmed",
a)},contributionConfirmed:function(a){this.fire("commerce-contribution-confirmed",a)}},{ATTRS:{}});b.namespace("Squarespace");b.Squarespace.CommerceAnalytics=new c;var d=b.Base.create("commerceAnalytics",b.Base,[],{initializer:function(){this._events=[b.Squarespace.CommerceAnalytics.on("commerce-item-viewed",this._getProtectedTracker("onItemViewed"),this),b.Squarespace.CommerceAnalytics.on("commerce-item-added",this._getProtectedTracker("onItemAdded"),this),b.Squarespace.CommerceAnalytics.on("commerce-item-removed",
this._getProtectedTracker("onItemRemoved"),this),b.Squarespace.CommerceAnalytics.on("commerce-item-modified",this._getProtectedTracker("onItemModified"),this),b.Squarespace.CommerceAnalytics.on("commerce-checkout-started",this._getProtectedTracker("onCheckoutStarted"),this),b.Squarespace.CommerceAnalytics.on("commerce-checkout-confirmed",this._getProtectedTracker("onCheckoutConfirmed"),this),b.Squarespace.CommerceAnalytics.on("commerce-contribution-confirmed",this._getProtectedTracker("onContributionConfirmed"),
this)];this._setCartMode()},destructor:function(){b.Array.invoke(this._events,"detach")},_setCartMode:function(){var a=!0;try{a=Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.testModeOn}catch(b){}this.cartMode=a?"test":"live"},_getProtectedTracker:function(a){return function(b){try{this[a].call(this,b)}catch(c){}}},onItemViewed:function(a){},onItemAdded:function(a){},onItemRemoved:function(a){},onItemModified:function(a){},onCheckoutStarted:function(a){},onCheckoutConfirmed:function(a){},
onContributionConfirmed:function(a){}},{ATTRS:{}}),c=b.Base.create("commerceAnalyticsInternal",d,[],{_createCartData:function(a){return{CartOrderId:a.id,CartSubtotal:a.subtotalCents/100,CartTax:a.taxCents/100,CartCurrency:"USD",CartMode:this.cartMode}},_createProductData:function(a){var b=a.productType;return{ProductId:a.itemId,ProductName:a.title,ProductType:b===g.PHYSICAL?"PHYSICAL":b===g.DIGITAL?"DIGITAL":"SERVICE",ProductSKU:a.chosenVariant?a.chosenVariant.sku:"",ProductPrice:a.purchasePriceCents/
100,ProductQuantity:a.quantity}},_getItemVariantPrice:function(a){return b.Object.hasKey(a,"onSale")&&a.onSale?(b.Object.hasKey(a,"salePrice")?a.salePrice:a.salePriceCents)/100:(b.Object.hasKey(a,"price")?a.price:a.priceCents)/100},_getItemPrice:function(a){var c=0;b.Object.hasKey(a,"variants")&&0<a.variants.length?(b.Array.each(a.variants,function(a){c+=this._getItemVariantPrice(a)},this),c/=a.variants.length):c=this._getItemVariantPrice(a);return c},_createItemData:function(a){return{ProductId:a.id,
ProductName:a.title}},_createItemAddedData:function(a){return b.merge(this._createCartData(a.shoppingCart),this._createProductData(a.newlyAdded))},_createItemRemovedData:function(a){return b.merge(this._createCartData(a.shoppingCart),this._createProductData(a.updatedEntry))},_createItemModifiedData:function(a){return b.merge(this._createCartData(a.shoppingCart),this._createProductData(a.updatedEntry))},_createItemCheckoutStartedData:function(a,c){return b.merge(this._createCartData(a),this._createProductData(c))},
_createItemCheckoutCompletedData:function(a,c){return b.merge(this._createCartData(a),this._createProductData(c))},_track:function(a,c){b.Squarespace.Analytics.trackInternal(a,c)},onItemViewed:function(a){}},{ATTRS:{}}),h=b.Base.create("commerceAnalyticsMixpanel",c,[],{_track:function(a,c){b.Squarespace.Analytics.track(a,c)},onItemViewed:function(a){this._track("shopper_product_viewed",this._createItemData(a))},onItemAdded:function(a){this._track("shopper_product_added",this._createItemAddedData(a))},
onItemRemoved:function(a){this._track("shopper_product_removed",this._createItemRemovedData(a))},onItemModified:function(a){this._track("shopper_product_modified",this._createItemModifiedData(a))},onCheckoutStarted:function(a){b.each(a.entries,function(b){this._track("shopper_product_checkout_started",this._createItemCheckoutStartedData(a,b))},this)},onCheckoutConfirmed:function(a){b.each(a.purchasedCart.entries,function(b){this._track("shopper_product_purchased",this._createItemCheckoutCompletedData(a.purchasedCart,
b))},this);this._track("shopper_order_submitted",{CartOrderId:a.purchasedCart.id,CartCurrency:"USD",CartGrandTotal:a.purchasedCart.grandTotalCents/100,CartSubtotal:a.purchasedCart.subtotalCents/100,CartTax:a.purchasedCart.taxCents/100,CartShipping:a.purchasedCart.shippingCostCents/100,CartTotalQuantity:a.purchasedCart.totalQuantity,CartMode:this.cartMode})},onContributionConfirmed:function(a){this._track("donation_submitted",{Currency:"USD",Total:a.amountCents/100,CartMode:this.cartMode})}},{ATTRS:{}}),
d=b.Base.create("commerceAnalyticsGoogle",d,[],{onCheckoutConfirmed:function(a){_gaq&&(_gaq.push(["_addTrans",a.id,"",a.purchasedCart.subtotalCents/100,a.purchasedCart.taxCents/100,a.purchasedCart.shippingCostCents/100,a.customer.billingAddress.city,a.customer.billingAddress.state,a.customer.billingAddress.country]),b.each(a.purchasedCart.entries,function(b){_gaq.push(["_addItem",a.id,b.chosenVariant?b.chosenVariant.sku:"digital",b.title,"",b.purchasePriceCents/100,b.quantity])}),_gaq.push(["_trackTrans"]))}},
{ATTRS:{}});new c;new h;new d;b.Lang.isObject(Static)&&b.Object.hasKey(Static,"SQUARESPACE_CONTEXT")&&b.Object.hasKey(Static.SQUARESPACE_CONTEXT,"item")&&Static.SQUARESPACE_CONTEXT.item.recordType===a.STORE_ITEM&&b.Squarespace.CommerceAnalytics.itemViewed(Static.SQUARESPACE_CONTEXT.item)},"1.0",{requires:["array-invoke","event-custom","node","base","squarespace-util"]})},1458:function(l,m){YUI.add("squarespace-models-shopping-cart",function(c){c.namespace("Squarespace.Models");c.namespace("Squarespace.Singletons");
var g=c.Squarespace.Models.ShoppingCart=c.Base.create("shoppingCart",c.Model,[],{initializer:function(){this.publish("item-added",{emitFacade:!0});this.publish("loaded",{emitFacade:!0});this.publish("recalculate-start",{emitFacade:!0});this.publish("recalculate-end",{emitFacade:!0});this._isRecalculating=this._readInProgress=!1;this.on("recalculate-start",function(){this._isRecalculating=!0},this);this.on("recalculate-end",function(){this._isRecalculating=!1},this)},toJSON:function(){var a=g.superclass.toJSON.call(this),
b=a.created;c.Lang.isNull(b)||(a.created=b.getTime());return a},sync:function(a,b,c){switch(a){case "read":this._read(b,c)}},load:function(a,b,e){"function"===typeof a&&(b=a,a={});this._readinProgress?this.after("load",b,e):c.Model.prototype.load.call(this,a,b?c.bind(b,e||this):null)},isRecalculating:function(){return this._isRecalculating},hasEntry:function(a,b){return c.Array.reduce(this.get("entries"),!1,function(e,d){return c.Lang.isValue(b)?e||d.itemId==a&&b.sku==d.chosenVariant.sku:e||d.itemId==
a})},addEntry:function(a,b,e,d,g,f,l){c.Data.post({url:"/api/commerce/shopping-cart/entries"+(g?"?isExpress=true":""),headers:{"Content-Type":"application/json"},data:c.JSON.stringify({itemId:a,sku:c.Lang.isValue(b)?b.sku:null,quantity:e,additionalFields:c.JSON.stringify(d)}),success:function(a){c.Squarespace.CommerceAnalytics.itemAdded(a);this.setAttrs(a.shoppingCart);this.fire("item-added");c.Lang.isFunction(f)&&f.call(l||this,null,a.newlyAdded)},failure:function(a){a.crumbFail&&(c.Squarespace.Utils.areCookiesEnabled()?
a.error="Your session has expired. Please reload the page and try again.":a.error="Please enable cookies in your browser, reload the page, and try again.");c.Lang.isFunction(f)&&f.call(l||this,a.message,null)}},this)},updateFormSubmission:function(a,b,e,d){var g=a.chosenVariant;this.fire("recalculate-start");c.Data.put({headers:{"Content-Type":"application/json"},url:c.Lang.sub("/api/commerce/shopping-cart/entries/{entryId}/additionalFields",{entryId:a.id}),data:c.JSON.stringify({itemId:a.itemId,
sku:c.Lang.isValue(g)?g.sku:null,additionalFields:c.JSON.stringify(b)}),success:function(a){this.fire("recalculate-end");this.setAttrs(a.shoppingCart);c.Lang.isFunction(e)&&e.call(d||this,null,a.updatedEntry)},failure:function(a){this.fire("recalculate-end");c.Lang.isFunction(e)&&e.call(d||this,a.message,null)}},this)},updateQuantity:function(a,b,e,d){var g=a.chosenVariant;this.fire("recalculate-start");c.Data.put({headers:{"Content-Type":"application/json"},url:c.Lang.sub("/api/commerce/shopping-cart/entries/{entryId}",
{entryId:a.id}),data:c.JSON.stringify({itemId:a.itemId,sku:c.Lang.isValue(g)?g.sku:null,quantity:b}),success:function(a){this.fire("recalculate-end");0===b?c.Squarespace.CommerceAnalytics.itemRemoved(a):c.Squarespace.CommerceAnalytics.itemModified(a);this.setAttrs(a.shoppingCart);c.Lang.isFunction(e)&&e.call(d||this,null,a.updatedEntry)},failure:function(a){this.fire("recalculate-end");c.Lang.isFunction(e)&&e.call(d||this,a.message,null)}},this)},updateShippingLocation:function(a,b,e){this.fire("recalculate-start");
c.Data.put({url:"/api/commerce/shopping-cart/shipping-location",data:a,success:function(a){this.fire("recalculate-end");this.setAttrs(a);c.Lang.isFunction(b)&&b.call(e||this,null)},failure:function(a){this.fire("recalculate-end");c.Lang.isFunction(b)&&b.call(e||this,a.message,null)}},this)},updateShippingMethod:function(a,b,e){this.fire("recalculate-start");c.Data.put({url:"/api/commerce/shopping-cart/selected-shipping-option",data:{shippingOptionKey:a},success:function(a){this.fire("recalculate-end");
this.setAttrs(a);c.Lang.isFunction(b)&&b.call(e||this,null)},failure:function(a){this.fire("recalculate-end");c.Lang.isFunction(b)&&b.call(e||this,a.message,null)}},this)},addCoupon:function(a,b,e){c.Data.post({url:"/api/commerce/shopping-cart/coupons",data:{promoCode:a},success:function(a){this.setAttrs(a);c.Lang.isFunction(b)&&b.call(e||this,null)},failure:function(a){c.Lang.isFunction(b)&&b.call(e||this,a.message,null)}},this)},removeCoupon:function(a,b,e){c.Data.del({url:"/api/commerce/shopping-cart/coupons/"+
a,success:function(a){this.setAttrs(a);c.Lang.isFunction(b)&&b.call(e||this,null)},failure:function(a){c.Lang.isFunction(b)&&b.call(e||this,a.message,null)}},this)},updateCustomerInfo:function(a){c.Data.put({url:"/api/commerce/shopping-cart/customer",data:{email:a},success:this.setAttrs.bind(this),failure:function(a){console.warn("An error happened when adding the customer info: ",a)}},this)},totalForItem:function(a,b){var e=c.Lang.isValue(b);return c.Array.reduce(this.get("entries"),0,function(c,
g){return g.item.id===a&&(!e||e&&g.chosenVariant.sku===b.sku)?c+g.quantity:c})},hasShippingOptions:function(){var a=this.get("shippingOptions");return c.Lang.isArray(a)&&0<a.length},_read:function(a,b){this._readInProgress=!0;this.fire("loading");c.Data.get({url:"/api/commerce/shopping-cart",data:{mock:a.mock?"true":"false"},success:function(a){this.fire("loaded");this._readInProgress=!1;b(null,a)},failure:function(a){this.fire("loaded");this._readInProgress=!1;b(a.message,null)}},this)}},{ATTRS:{id:{validator:c.Lang.isString},
websiteId:{validator:c.Lang.isString},orderId:{validator:c.Lang.isString},created:{getter:function(a){return c.Lang.isValue(a)?new Date(a):null},setter:function(a){return c.Lang.isDate(a)?a.getTime():a},validator:c.Lang.isNumber},isPurchased:{value:!1,validator:c.Lang.isBoolean},entries:{value:[],validator:c.Lang.isArray},shippingOptions:{value:[],validator:c.Lang.isArray},selectedShippingOption:{validator:c.Lang.isObject},shippingLocation:{validator:c.Lang.isObject},applicableTaxRules:{value:[],
validator:c.Lang.isArray},coupons:{value:[],validator:c.Lang.isArray},validCoupons:{value:[],validator:c.Lang.isArray},invalidCoupons:{value:[],validator:c.Lang.isArray},subtotalCents:{validator:c.Lang.isNumber,value:0},taxCents:{validator:c.Lang.isNumber,value:0},shippingCostCents:{validator:c.Lang.isNumber,value:0},discountCents:{validator:c.Lang.isNumber,value:0},grandTotalCents:{validator:c.Lang.isNumber,value:0},totalQuantity:{validator:c.Lang.isNumber,value:0},hasDigital:{validator:c.Lang.isBoolean,
value:!1},purelyDigital:{validator:c.Lang.isBoolean,value:!1},requiresShipping:{validator:c.Lang.isBoolean,value:!1}}});c.Squarespace.Singletons.ShoppingCart=new g},"1.0",{requires:["base","model","squarespace-commerce-utils","squarespace-commerce-analytics","squarespace-util"]})},2315:function(l,m){YUI.add("squarespace-product-quick-view",function(c){c.config.win.Squarespace.onInitialize(c,function(){if(!c.UA.mobile){var g=null,a={},b=function(b,d){var h=b.getData("id"),f=b.getData("group")||"ungrouped";
a[f]||(a[f]=[],c.all(".sqs-product-quick-view-button[data-id]").each(function(b){(f==b.getData("group")||"ungrouped"==f&&!b.getData("group"))&&a[f].push(b.getData("id"))}));g?g.get("currentId")===h&&g.get("currentGroup")===f?(d&&d.halt(!0),g.open()):(g.set("currentId",h),g.set("currentGroup",f)):g=new c.Squarespace.Widgets.Products.QuickView({currentId:h,currentGroup:f,products:a,render:!0})};c.one("body").delegate("click",function(a){a.preventDefault();b(a.currentTarget,a)},".sqs-product-quick-view-button[data-id]");
c.Global.on("tweak:change",function(a){var d=a.getName();a=-1<d.indexOf("tweak-product-quick-view-lightbox-");var d=-1<d.indexOf("tweak-product-item-gallery-"),h=c.one(".collection-type-products.view-item");a||d&&!h?g?g.get("isLightboxOpen")||g.open():(a=c.one(".sqs-product-quick-view-button[data-id]"),b(a,null)):g&&g.get("lightbox").close()})}})},"1.0",{requires:["squarespace-widgets-products-quick-view"]})},2374:function(l,m){YUI.add("squarespace-widgets-products-quick-view",function(c){c.namespace("Squarespace.Widgets.Products");
var g=c.Squarespace.Widgets.Products.QuickView=c.Base.create("quickView",c.Squarespace.SSWidget,[],{initializer:function(){this.set("lightbox",new c.Squarespace.Widgets.ModalLightbox({content:this.get("boundingBox"),render:c.one("body"),className:g.CSS_LIGHTBOX_PREFIX}));this.get("boundingBox").append(this.get("nextButton")).append(this.get("prevButton"));this.get("lightbox").get("boundingBox").append(this.get("closeButton"))},bindUI:function(){g.superclass.bindUI.call(this);this.after(["currentIdChange",
"currentGroupChange"],function(){this._destroyProductItemViewInstance();this.syncUI()});this._registerEvent(this.get("lightbox").on("close",function(){this.set("isLightboxOpen",!1)},this));this._bindUIControls();this._bindKeyboardControls();if(window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn())c.on("beforeunload",function(){this._destroyProductItemViewInstance();this.destroy(!0);this.get("lightbox").destroy(!0)},this)},syncUI:function(){g.superclass.syncUI.call(this);this._getData();
this.get("nextButton").toggleClass(g.CSS_HIDDEN,!this._getNextId());this.get("prevButton").toggleClass(g.CSS_HIDDEN,!this._getPrevId())},_bindUIControls:function(){var a=this.get("boundingBox");this._registerEvent(a.delegate("click",function(a){this._setId(this._getNextId());a.stopPropagation()},"."+g.CSS_NEXT_BUTTON,this));this._registerEvent(a.delegate("click",function(a){this._setId(this._getPrevId());a.stopPropagation()},"."+g.CSS_PREV_BUTTON,this));this._registerEvent(a.delegate("click",function(a){this.get("lightbox").close();
a.stopPropagation()},"."+g.CSS_CLOSE_BUTTON,this));this._registerEvent(c.one("body").on("click",function(b){this.get("isLightboxOpen")&&(!a.contains(b.target)&&!this._isProductForm(b.target))&&this.get("lightbox").close();b.stopPropagation()},this))},_bindKeyboardControls:function(){this._registerEvent(c.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getNextId())},c.config.win,"down:39",this));this._registerEvent(c.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getPrevId())},
c.config.win,"down:37",this))},_getData:function(){c.Data.get({url:"/api/rendering/product-quick-view/"+this.get("currentId"),success:function(a){this._renderModal(a.html)},failure:function(a){this._renderError(a)}},this)},_renderModal:function(a){this.get("contentBox").empty().insert(a);this.set("productsItemViewInstance",new c.Squarespace.SystemCollections.Products.ItemV2({host:this.get("contentBox")}));this.get("isLightboxOpen")?this.get("lightbox").syncUI():this.open();this._executeScripts();
this._initializeCheckoutArea()},open:function(){this.get("lightbox").open();this.set("isLightboxOpen",!0);c.one(".sqs-style-mode-active")&&c.Squarespace.EscManager.removeTarget(this.get("lightbox"))},_executeScripts:function(){var a=this.get("contentBox");a.all("script").each(function(b){var c=document.createElement("script");c.type="text/javascript";b.getAttribute("src")?c.src=b.getAttribute("src"):c.innerHTML=b.get("innerHTML");b.remove();a.append(c)},this)},_initializeCheckoutArea:function(){c.Squarespace.ProductUtils.initializeVariantDropdowns();
c.Squarespace.CartUtils.initializeAddToCartButtons();c.Lang.isNull(c.Cookie.get("CART"))?c.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible"):c.Squarespace.Singletons.ShoppingCart.load(function(){c.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},this)},_renderError:function(a){new c.Squarespace.Widgets.Alert({"strings.title":"Error"+(a&&a.title?": "+a.title:""),"strings.message":a&&a.error||"There was an issue loading the quick view of this product. Please see the product's page for full product details."})},
_getNextId:function(){var a=this.get("products")[this.get("currentGroup")],b=a.indexOf(this.get("currentId"))+1;return a[b]||!1},_getPrevId:function(){var a=this.get("products")[this.get("currentGroup")],b=a.indexOf(this.get("currentId"))-1;return a[b]||!1},_setId:function(a){a&&this.set("currentId",a)},_destroyProductItemViewInstance:function(){this.get("productsItemViewInstance")&&this.get("productsItemViewInstance").destroy(!0)},_isProductForm:function(a){var b=c.Squarespace.Widgets.AsyncForm.CSS_PREFIX;
return a.ancestor("."+b)||a.hasClass("lightbox-close")&&a.siblings("."+b)||a.one("."+b)||a.hasClass(b)}},{CSS_PREFIX:"sqs-product-quick-view",CSS_LIGHTBOX_PREFIX:"sqs-product-quick-view-lightbox",CSS_NEXT_BUTTON:"sqs-product-quick-view-lightbox-next-button",CSS_PREV_BUTTON:"sqs-product-quick-view-lightbox-prev-button",CSS_CLOSE_BUTTON:"sqs-product-quick-view-lightbox-close-button",CSS_HIDDEN:"sqs-product-quick-view-lightbox-element-hidden",ATTRS:{currentId:{value:null},currentGroup:{value:null},products:{value:{}},
lightbox:{value:null},prevButton:{valueFn:function(){return c.Node.create('<div class="'+g.CSS_PREV_BUTTON+'"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="21.5,1.3 2.6,23.4 21.5,45.7 "/></g></svg></div>')}},nextButton:{valueFn:function(){return c.Node.create('<div class="'+g.CSS_NEXT_BUTTON+'"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="1.5,45.7 20.4,23.5 1.5,1.3 "/></g></svg></div>')}},closeButton:{valueFn:function(){return c.Node.create('<div class="'+
g.CSS_CLOSE_BUTTON+'"><svg viewBox="0 0 16 16"><g class="svg-icon"><line fill="none" stroke-miterlimit="10" x1="1.4" y1="1.4" x2="14.4" y2="14.4"/><line fill="none" stroke-miterlimit="10" x1="1.4" y1="14.4" x2="14.4" y2="1.4"/></g></svg></div>')}},isLightboxOpen:{value:!1}}})},"1.0",{requires:"squarespace-beforeunload squarespace-cart-utils squarespace-image-loader squarespace-modal-lightbox squarespace-models-shopping-cart squarespace-product-utils squarespace-ss-widget squarespace-widgets-alert".split(" ")})}});
